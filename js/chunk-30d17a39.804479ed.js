(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30d17a39"],{"43f2":function(t,s,e){t.exports=e.p+"img/logo.0027441d.jpeg"},"4f5a":function(t,s,e){"use strict";var a=e("b3ea"),i=e.n(a);i.a},8629:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("Home"),e("div",{staticClass:"container"},[e("router-link",{attrs:{to:"/"}},[t._v("首页")]),t._v(" | "),e("router-link",{attrs:{to:"/detail"}},[t._v("商品详情")]),e("div",{staticClass:"rank"},[e("p",[t._v("排序："),e("el-button",{staticClass:"default"},[t._v("默认")]),e("span",{on:{click:t.handleSort}},[t._v(" 价格")]),e("i",{staticClass:"iconfont"},[t._v(t._s(1==t.sortFlag?"":""))])],1)]),e("div",{staticClass:"search"},[e("h3",[t._v("price")]),t._l(t.searchPrice,(function(s){return e("div",{key:s.id},[e("p",{on:{click:function(e){return t.handlePrice(s.gt,s.lt)}}},[t._v(t._s(s.gt)+"--"+t._s(s.lt))])])}))],2),e("div",{staticClass:"right"},t._l(t.goodsList,(function(s){return e("div",{key:s.id,staticClass:"list"},[e("img",{attrs:{src:s.productImage,alt:""}}),e("p",{staticClass:"name"},[t._v(t._s(s.productName))]),e("p",{staticClass:"price"},[t._v("￥"+t._s(s.salePrice))]),e("button",{staticClass:"add",on:{click:function(e){return t.addCart(s.productId)}}},[t._v("加入购物车")])])})),0),e("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:30},on:{"current-change":t.getPage}})],1)],1)},i=[],o=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"login"},[a("img",{staticClass:"logo",attrs:{src:e("43f2"),alt:""}}),a("div",{staticClass:"sign"},[a("span",[t._v(t._s(t.successName))]),a("el-button",{on:{click:function(s){t.dialogFormVisible=!0}}},[t._v("登录")]),a("el-dialog",{attrs:{title:"登陆界面",visible:t.dialogFormVisible},on:{"update:visible":function(s){t.dialogFormVisible=s}}},[a("el-form",{attrs:{model:t.form,"status-icon":"",rules:t.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":t.formLabelWidth}},[a("el-input",{model:{value:t.form.username,callback:function(s){t.$set(t.form,"username",s)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pass","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.pass,callback:function(s){t.$set(t.form,"pass",s)},expression:"form.pass"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(s){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleLogin}},[t._v("确 定")])],1)],1),a("el-button",{on:{click:t.handleLogout}},[t._v("退出")]),a("router-link",{attrs:{to:"/carts"}},[a("i",{staticClass:"iconfont carts icon-gouwuche"})])],1)])},r=[],n={name:"Home",data:function(){var t=function(t,s,e){""===s&&e(new Error("请输入密码"))};return{dialogFormVisible:!1,form:{username:"",pass:""},rules:{pass:[{validator:t,trigger:"blur",required:!0}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}]},formLabelWidth:"120px",successName:""}},methods:{handleLogin:function(){var t=this;this.form.username&&this.form.pass?this.$http({url:"/users/login",method:"post",data:{userName:this.form.username,userPwd:this.form.pass}}).then((function(s){200==s.data.code?(t.$message({message:s.data.msg,duration:1e3,type:"success"}),t.successName=s.data.result,t.dialogFormVisible=!1):t.$message({message:s.data.msg,duration:1e3,type:"error"})})):this.$message({message:"用户名和密码不能为空",duration:1e3,type:"error"})},handleLogout:function(){var t=this;this.$http.post("/users/logout").then((function(s){t.$message({message:s.data.msg,duration:1e3}),t.successName=""}))}},mounted:function(){var t=this;this.$http("/users/checkLogin").then((function(s){200==s.data.code?t.successName=s.data.result:t.$message({message:"未登陆",duration:1e3,type:"warning"})}))}},c=n,l=(e("4f5a"),e("2877")),u=Object(l["a"])(c,o,r,!1,null,"1a304b46",null),d=u.exports,m={name:"home",data:function(){return{searchPrice:[{gt:0,lt:100,id:1001},{gt:100,lt:500,id:1002},{gt:500,lt:1e3,id:1003},{gt:1e3,lt:5e3,id:1004},{gt:5e3,lt:1e4,id:1005}],goodsList:[],limit:8,start:0,sortFlag:1}},components:{Home:d},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.$http.get("/goods/list",{params:{start:this.start,limit:this.limit}}).then((function(s){t.goodsList=s.data.result}))},handlePrice:function(t,s){var e=this;this.$http({url:"/goods/price",method:"get",params:{gt:t,lt:s}}).then((function(t){200==t.data.code?(e.goodsList=t.data.result,e.total=10*Math.ceil(t.data.total/e.limit)):(e.goodsList=[],e.$message({duration:1e3,message:t.data.msg,type:"warning"}))}))},getPage:function(t){this.start=(t-1)*this.limit,this.initData()},compareUp:function(t){return function(s,e){return s[t]-e[t]}},compareDown:function(t){return function(s,e){return e[t]-s[t]}},handleSort:function(){this.sortFlag=1==this.sortFlag?-1:1,1==this.sortFlag?this.goodsList.sort(this.compareUp("salePrice")):this.goodsList.sort(this.compareDown("salePrice"))},addCart:function(t){var s=this;this.$http({url:"/users/addCart",method:"post",data:{productId:t}}).then((function(t){s.$message({message:t.data.msg,code:200,duration:1e3,type:"success"})}))}},beforeRouteLeave:function(t,s,e){var a=this;this.$http("/users/checkLogin").then((function(t){200==t.data.code?e():a.$message({message:t.data.msg,duration:1e3})}))}},g=m,h=(e("cc2d"),Object(l["a"])(g,a,i,!1,null,"11df4961",null));s["default"]=h.exports},"99eb":function(t,s,e){},b3ea:function(t,s,e){},cc2d:function(t,s,e){"use strict";var a=e("99eb"),i=e.n(a);i.a}}]);
//# sourceMappingURL=chunk-30d17a39.804479ed.js.map